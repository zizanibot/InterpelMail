<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Site.Title }}</title>
    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}">
    <!-- Turf.js for geospatial operations -->
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@7/turf.min.js"></script>
</head>
<body>
    {{ partial "nav.html" . }}

    <div id="campaign-info"><h1>Interpelle tes élu·es:</h1></div>

    <div>
        <select id="campaign">
            <option value="">-- Sélectionne une campagne --</option>
            {{ range $key, $campaign := .Site.Data.campaigns }}
		<option value="{{ $key }}">{{ $campaign.title }} -- {{ $campaign.date }}</option>
            {{ end }}
        </select>
    </div>

    <!-- Tab Headers -->
    <div class="tab-headers">
	<button class="tab-btn active" data-tab="address-form">Ta.on député.e</button>
	<button class="tab-btn" data-tab="subdivision">Les député.es du département</button>
    </div>

    <!-- Tab Content -->
    <div class="tab-contents">
	<div class="tab-content active" id="address-form">
	    <input type="text" id="address" placeholder="Entre ici l'adresse de ton domicile" maxlength="50">
	    <div id="suggestions"></div> 
	    <button class="find-deputy" id="find-deputy-address" type="button">Trouve ma.on député.e</button>
	</div>

	<div class="tab-content" id="subdivision">
	    <select id="deps-select">
		<option value="">Sélectionne un département</option>
	    </select>
	    <button class="find-deputy" id="find-deputy-subdivision" type="button">Trouve les député.es</button>

		<div id="deputy-filter"></div>
	</div>

    </div>

    <div id="deputy-info"></div>
    <button id="send-email" style="display:none;">Interpeler !</button>
    <div id="desc"></div>

    <script>
        window.siteData = {
            campaigns: {{ .Site.Data.campaigns | jsonify | safeJS }},
            deputies: {{ .Site.Data.deputies | jsonify | safeJS }}
        };
    </script>

    <script src="{{ "js/main.js" | relURL }}"></script>
</body>
</html>
